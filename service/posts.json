[{"id":"110","title":"Trigger (Tetikleyici) Nedir ? Nas\u0131l Kullan\u0131l\u0131r ?","content_half":"<div style=\"text-align: left;\">\r\nBu yaz\u0131mda <b>TRIGGER<\/b>'lar\u0131 <b>MYSQL<\/b> kullanarak inceleyece\u011fiz.<br \/>\r\n<b>INSERT , UPDATE , DELETE<\/b> i\u015flemlerinin ger\u00e7ekle\u015fmesi halinde devreye girebilen <b>STORED PROCEDURE(SAKLI YORDAM) <\/b>yap\u0131s\u0131d\u0131r.Hassas verilerin de\u011fi\u015fiminin veritaban\u0131nda kay\u0131tlar\u0131n\u0131 tutmay\u0131 , gerek eski haline getirmek ,gerek ise olu\u015fan durumlara g\u00f6re belirledi\u011fimiz i\u015flemleri yapabilmemizi sa\u011flar.<br \/>\r\n<br \/>\r\n<b>TRIGGER<\/b> \u00e7al\u0131\u015fmaya ba\u015flamadan \u00f6nce bir","content_full":"<div style=\"text-align: left;\">\r\nBu yaz\u0131mda <b>TRIGGER<\/b>'lar\u0131 <b>MYSQL<\/b> kullanarak inceleyece\u011fiz.<br \/>\r\n<b>INSERT , UPDATE , DELETE<\/b> i\u015flemlerinin ger\u00e7ekle\u015fmesi halinde devreye girebilen <b>STORED PROCEDURE(SAKLI YORDAM) <\/b>yap\u0131s\u0131d\u0131r.Hassas verilerin de\u011fi\u015fiminin veritaban\u0131nda kay\u0131tlar\u0131n\u0131 tutmay\u0131 , gerek eski haline getirmek ,gerek ise olu\u015fan durumlara g\u00f6re belirledi\u011fimiz i\u015flemleri yapabilmemizi sa\u011flar.<br \/>\r\n<br \/>\r\n<b>TRIGGER<\/b> \u00e7al\u0131\u015fmaya ba\u015flamadan \u00f6nce bir <b>TRANSACTION <\/b>a\u00e7\u0131l\u0131r.<b>TRANSACTION <\/b>konusuna burada detayl\u0131 olarak girmiyorum.Fakat temel bir \u015fekilde kullan\u0131m\u0131 \u015fu \u015fekilde ger\u00e7ekle\u015fiyor.E\u011fer <b>TRIGGER <\/b>blo\u011funda bir&nbsp;<b>ROLLBACK &nbsp;<\/b>var&nbsp;ifadesi \u00e7al\u0131\u015ft\u0131r\u0131l\u0131rsa olu\u015fan durumlarda son i\u015flem ge\u00e7ersiz olur ve yap\u0131lan i\u015flemler eski haline d\u00f6nderilir , e\u011fer yok ise otomatik olarak <b>COMMIT <\/b>yap\u0131l\u0131r ve i\u015flem ger\u00e7ekle\u015ftirilir.Bunu \u015f\u00f6yle \u00f6rnekleyelim ; \u00f6rne\u011fin bir ATM'den birisine para transferi yap\u0131yorsunuz,para hesab\u0131n\u0131zdan d\u00fc\u015ft\u00fc fakat g\u00f6nderdi\u011finiz ki\u015finin hesab\u0131na para ula\u015fmad\u0131.\u0130\u015fte bu durumlarda <b>TRANSACTION <\/b>devreye giriyor ve yapt\u0131\u011f\u0131 kontrol ile paray\u0131 sizin hesab\u0131n\u0131za tekrar yat\u0131r\u0131yor<b>.<\/b><br \/>\r\n<b><br \/><\/b>\r\n<br \/>\r\n<ul>\r\n<li><b>INSERT <\/b>i\u015fleminde&nbsp;sadece <b>NEW<\/b> kullan\u0131l\u0131r.<\/li>\r\n<li><b>UPDATE<\/b> i\u015fleminde hem <b>NEW<\/b> hem de <b>OLD<\/b> kullan\u0131l\u0131r.<\/li>\r\n<li><b>DELETE<\/b> i\u015fleminde ise sadece <b>OLD<\/b> kullan\u0131l\u0131r.<\/li>\r\n<\/ul>\r\n<br \/>\r\nSyntax'\u0131 (Yaz\u0131m Kural\u0131):<br \/>\r\n<br \/>\r\n<div>\r\n<br \/><\/div>\r\n<\/div>\r\n<pre class=\"brush : sql\">CREATE [ DEFINER={ &lt; kullanici ad\u0131 &gt;} | CURRENT_USER} ] TRIGGER &lt; trigger ad\u0131 &gt;\r\n{ BEFORE | AFTER }\r\n{ UPDATE | INSERT | DELETE }\r\nON &lt; tablo ad &gt;\r\nFOR EACH ROW\r\nBEGIN\r\n..\r\n\u2026\r\nEND ; <\/pre>\r\n\u00d6rnek bir uygulama ile daha anla\u015f\u0131l\u0131r bir hale getirelim.<br \/>\r\nYap\u0131lan <b>INSERT <\/b>ve <b>DELETE <\/b>i\u015flemlerinde tetiklenecek birer <b>TRIGGER <\/b>olu\u015ftural\u0131m.\r\nBir futbol tak\u0131m\u0131 i\u00e7in m\u00fclakat se\u00e7imi yap\u0131ls\u0131n , &nbsp;e\u011fer ki j\u00fcrinin verdi\u011fi puanlarla toplamda 85 puan\u0131n \u00fczerinde olan ki\u015fileri futbol tak\u0131m\u0131na ald\u0131\u011f\u0131m\u0131z\u0131 varsayal\u0131m.Tak\u0131m al\u0131nan her ki\u015fiye otomatik olarak 1-100 aras\u0131nda tak\u0131m numaralar\u0131 verilmektedir.Daha sonra tak\u0131mdan ayr\u0131lanlar\u0131 da belirtelim.<br \/>\r\n<br \/>\r\n<br \/>\r\n\u00d6ncelikle tablolar\u0131m\u0131z\u0131 olu\u015fturuyoruz ;\r\n\r\n<br \/>\r\n<pre class=\"brush: sql\">CREATE TABLE mulakat_listesi (tcno INT NOT NULL,isim VARCHAR(20),soyisim VARCHAR(20),\r\nmulakat_puani INT,PRIMARY(tcno));\r\n<\/pre>\r\nM\u00fclakat listesine kat\u0131lan ki\u015filerin <b>tcno , isim , soyisim<\/b> ve m\u00fclakattan ald\u0131klar\u0131 puan i\u00e7in  <b>mulakat_puani<\/b> field alanlar\u0131n\u0131 tan\u0131mlad\u0131k.\r\n<br \/>\r\n<pre class=\"brush: sql\">CREATE TABLE futbol_takimi(takimno INT NOT NULL,ad VARCHAR (20),soyad VARCHAR(30),\r\ntarih TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);\r\n<\/pre>\r\nFutbol tak\u0131m\u0131na se\u00e7ilecek olan ki\u015filer i\u00e7in <b>futbol_takimi<\/b> tablosunda her bir ki\u015finin bir <b>takimno , ad , soyad ve tarih<\/b> field alanlar\u0131n\u0131 tan\u0131mlad\u0131k.\r\n<br \/>\r\n<pre class=\"brush: sql\">CREATE TABLE ayrilan (ayrilan_isim VARCHAR(20),ayrilan_soyisim VARCHAR(20),\r\ngiris_tarih VARCHAR(100),ayrilma_tarih TIMESTAMPS NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);\r\n<\/pre>\r\nTak\u0131mdan ayr\u0131lanlar\u0131 tutaca\u011f\u0131m\u0131z ayrilan tablosunda <b>ayrilan_isim , ayrilan_soyisim , giris_tarih<\/b> ve <b>ayrilma_tarih<\/b> field alanlar\u0131n\u0131 tan\u0131mlad\u0131k.\r\n\r\n<br \/>\r\n<br \/>\r\n<br \/>\r\nArd\u0131ndan <b>TRIGGER'<\/b>\u0131m\u0131z\u0131 olu\u015fturuyoruz.<br \/>\r\n<br \/>\r\n<pre class=\"brush: sql\">DELIMITER $$\r\n\r\nCREATE TRIGGER takima_girmek\r\n BEFORE INSERT ON mulakat_listesi\r\n  FOR EACH ROW\r\n   BEGIN\r\n    IF(NEW.mulakat_puani&gt;85) THEN\r\n     INSERT INTO futbol_takimi (takimno,ad,soyad) VALUES  ((FLOOR(RAND()*100)),NEW.isim,NEW.soyisim);\r\n    END IF;\r\n   END;$$ <\/pre>\r\nBurada yapm\u0131\u015f oldu\u011fumuz \u015fey , e\u011fer se\u00e7melerde <b>m\u00fclakat puan\u0131<\/b> 85'ten y\u00fcksek olan bir ki\u015fi var ise &nbsp;bu ki\u015finin bilgilerini al\u0131p , 1 ile 100 aras\u0131nda bir tak\u0131m numaras\u0131 verip , <b>futbol tak\u0131m\u0131 <\/b>tablosuna eklemek.Bu <b>TRIGGER'<\/b>\u0131 olu\u015fturup \u00e7al\u0131\u015ft\u0131rd\u0131\u011f\u0131m\u0131zda sistem bizim yerimize <b>TRIGGER <\/b>ko\u015fulunu sa\u011flayan durumda bu i\u015flemleri ger\u00e7ekle\u015ftirecektir.<br \/>\r\n<span style=\"background-color: white; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace; font-size: 14px; line-height: 15.3999996185303px; white-space: nowrap;\">DELIMITER $$<\/span><br \/>\r\n<span style=\"background-color: white; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace; font-size: 14px; line-height: 15.3999996185303px; white-space: nowrap;\"><br \/><\/span>\r\n<br \/>\r\n<pre class=\"brush : sql\">CREATE TRIGGER ayrilma_islemi\r\n AFTER DELETE ON futbol_takimi\r\n  FOR EACH ROW\r\n   BEGIN\r\n    INSERT INTO ayrilan (ayrilan_isim,ayrilan_soyisim,giris_tarih)\r\n    VALUES(OLD.ad,OLD.soyad,OLD.tarih);\r\n   END;$$\r\n<\/pre>\r\nBurada ise e\u011fer tak\u0131mdan ayr\u0131lan olursa bu ki\u015finin ad\u0131n\u0131 , soyad\u0131n\u0131 tak\u0131ma giri\u015f tarihini ve \u00e7\u0131k\u0131\u015f tarihini ayr\u0131lan tablosuna ekliyor.","date":"1428973662","tags":"mysql , trigger , tetikleyici , mysql trigger , sql , sql trigger nas\u0131l kullan\u0131l\u0131r , sql trigger nedir , mysql trigger nedir","link":"trigger-tetikleyici-nedir-nasil-kullanilir"}]